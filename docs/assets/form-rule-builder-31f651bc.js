import{v as s,$ as e,h as t}from"./index-d25e61ad.js";import{$ as a}from"./dialog-47ec0b44.js";const l={open(s){const e=document.getElementById(s);e&&e.classList.add("is-active")},close(s){const e=document.getElementById(s);e&&e.classList.remove("is-active")},toggle(s){const e=document.getElementById(s);e&&e.classList.toggle("is-active")}},o=()=>{const{div:o,label:c,input:n,select:u,option:i,button:r}=s.tags;let d=s.state(!1);const{tags:p,rule:m}=e.tag;let v="",b={amount:0,tag:""},g=u({class:"input",onchange:s=>{b.tag=s.target.value,f()}},i({value:""},""));function f(){e.tag.setRule(v,b)}return s.derive(()=>{let e=new Array;e=p.val.map(e=>i({value:e,selected:s.derive(()=>{let s=Object.values(m.val)[0]??{amount:0,tag:""};return b=s,s.tag===e})},e)),s.add(g,e)}),o({class:"box"},o({class:"field"},c({class:"field"},"Keyword"),o({class:"control"},n({class:"input",type:"text",placeholder:"EX. Wendy's or Kroger Fuel",value:s.derive(()=>(v=Object.keys(m.val)[0]??"",v)),oninput:s=>{v=s.target.value,f()}}))),o({class:"field"},c({class:"field"},"Amount"),o({class:"control"},n({class:"input",type:"number",placeholder:"Amount..",value:s.derive(()=>(Object.values(m.val)[0]??{amount:0,tag:""}).amount.toString()),oninput:s=>{b.amount=parseFloat(s.target.value),f()}}))),o({class:"field"},c({class:"field"},"Tags"),o({class:"control"},g)),o({class:"buttons"},r({class:"button is-primary",type:"button",disabled:()=>d.val,onclick:()=>(d.val=!0,b.amount||(b.amount=0),void e.tag.saveRule(v,b).then(()=>{d.val=!1,l.close("RuleBuilderModal"),a({message:"Save successful.",type:"success"})}))},()=>d.val?t():"Save"),r({class:"button is-secondary",type:"reset",onclick:()=>(v="",b={amount:0,tag:""},void e.tag.resetRule())},"Reset")))};export{o as F,l as m};
