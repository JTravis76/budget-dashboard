import{v as s,$ as t}from"./index-96319300.js";import{c as l}from"./dialog-0bade356.js";const{div:e,label:o,input:a,select:c,option:n,button:u}=s.tags,r=()=>{const{tags:l,rule:r}=t.tag;let i="",m={amount:0,tag:""},d=c({class:"input",onchange:s=>m.tag=s.target.value},n({value:""},""));return s.derive(()=>{let t=new Array;t=l.val.map(t=>n({value:t,selected:s.derive(()=>{let s=Object.values(r.val)[0]??{amount:0,tag:""};return m=s,s.tag===t})},t)),s.add(d,t)}),e({class:"box"},e({class:"field"},o({class:"field"},"Keyword"),e({class:"control"},a({class:"input",type:"text",placeholder:"EX. Wendy's or Kroger Fuel",value:s.derive(()=>(i=Object.keys(r.val)[0]??"",i)),oninput:s=>i=s.target.value}))),e({class:"field"},o({class:"field"},"Amount"),e({class:"control"},a({class:"input",type:"number",placeholder:"Amount..",value:s.derive(()=>(Object.values(r.val)[0]??{amount:0,tag:""}).amount.toString()),oninput:s=>m.amount=parseFloat(s.target.value)}))),e({class:"field"},o({class:"field"},"Tags"),e({class:"control"},d)),e({class:"buttons"},u({class:"button is-primary",type:"button",onclick:()=>{t.tag.addRule(i,m).then(s=>console.log(s))}},"Save"),u({class:"button is-secondary",type:"reset",onclick:()=>(i="",m={amount:0,tag:""},void t.tag.resetRule())},"Reset")))},{div:i,strong:m,button:d}=s.tags,b=async()=>{await t.tag.getRules();let{rules:s,loading:e}=t.tag;return e.val=!1,i({class:"container mt-2"},r(),()=>e.val?i({class:"skeleton-block"}):i({class:"box"},s.val.map(s=>{var e;const o=Object.keys(s)[0],a=null==(e=Object.values(s)[0])?void 0:e.sort((s,t)=>s.amount<t.amount?1:-1);return i({class:"columns rule-bordered"},i({class:"column"},m(o)),i({class:"column"},a.map(s=>i({class:"columns"},i({class:"column"},`$${s.amount.toFixed(2)}`),i({class:"column"},s.tag),i({class:"column"},i({class:"buttons"},d({class:"button is-small is-default",onclick:()=>t.tag.setRule(o,s)},"Edit"),d({class:"button is-small is-default",onclick:()=>function(s,e){l({title:"Confirmation",type:"yesno",message:"Are you sure you want to remove this tag?"}).then(l=>{l&&t.tag.removeRule(s,e)})}(o,s)},"Remove")))))))})))};export{b as RuleBuilder};
