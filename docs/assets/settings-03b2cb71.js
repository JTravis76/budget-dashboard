import{v as e,$ as t,T as s}from"./index-96319300.js";import{c as a}from"./dialog-0bade356.js";const{div:o,h4:l,p:n,button:c,input:i}=e.tags,r=()=>{function e(){a({title:"Overwrite confirmation?",message:"Are you sure you want to restore from this backup? This cannot be undone.",type:"yesno"}).then(e=>{if(e){const e=document.getElementById("file");e.onchange=()=>{e&&e.files&&[...e.files].forEach(e=>{"application/json"==e.type&&function(e){const a=new FileReader;a.addEventListener("load",e=>{const a=e.target.result;if(a&&"string"==typeof a){let e=new Array;JSON.parse(a).forEach(t=>{let a=new s(t);a.id=0,e.push(a)}),e.length>0&&t.transaction.resetTansactions().then(s=>{200===s&&t.transaction.saveTransactions(e).then(e=>{200===e&&alert("database restored successful.")})})}}),a.readAsText(e)}(e)})},e.click()}})}return o({class:"columns"},o({class:"column is-one-fifth"},l({class:"title is-4"},"Backup / Restore")),o({class:"column"},o({style:"border-left: 2px solid; padding-left: 10px;"},n("Export the entire database to create a backup."),c({class:"button is-default",onclick:()=>{t.dashboard.getAllTransactions().then(e=>{if(200===e){let e=JSON.stringify(t.dashboard.transactions.val);const s=new Blob([e],{type:"text/plain"}),a=document.createElement("a");a.href=window.URL.createObjectURL(s);let o=new Date;a.download=`budget-backup_${o.getFullYear()}-${o.getMonth()+1}.json`,a.click()}})}},"Backup"),n("Restore database from a backup."),c({class:"button is-default",onclick:()=>e()},"Restore"),i({type:"file",name:"files[]",id:"file",style:"opacity: 0",multiple:""}))))},{div:u,h4:d,p:p,button:f,input:b,label:m,br:y}=e.tags,k=()=>{let s=e.state(0);return u({class:"columns"},u({class:"column is-one-fifth"},d({class:"title is-4"},"Tag Rule")),u({class:"column"},u({style:"border-left: 2px solid; padding-left: 10px;"},p("Start the tag generator."),u({class:"control"},m({class:"radio"},b({type:"radio",name:"runType",class:"radio",checked:()=>0===s.val,onclick:()=>s.val=0}),"Blanks only"),y(),m({class:"radio"},b({type:"radio",name:"runType",class:"radio",checked:()=>1===s.val,onclick:()=>s.val=1}),"All records")),f({class:"button is-default",onclick:()=>{t.dashboard.getAllTransactions().then(e=>{if(200===e){let e=new Array;0===s.val?t.dashboard.transactions.val.filter(e=>null==e.tag||""==e.tag).forEach(s=>{s.tag=t.tag.generateTag(s),e.push(s)}):1===s.val&&t.dashboard.transactions.val.forEach(s=>{s.tag=t.tag.generateTag(s),e.push(s)}),e.length>0&&t.transaction.saveTransactions(e).then(e=>{200===e&&window.setTimeout(()=>window.location.reload(),1e3)})}})}},"Run Rules"))))},{div:h,h4:w,p:g,button:R}=e.tags,{div:x}=e.tags,v=()=>x({class:"container mt-2"},r(),k(),h({class:"columns"},h({class:"column is-one-fifth"},w({class:"title is-4"},"Reset")),h({class:"column"},h({style:"border-left: 2px solid; padding-left: 10px;"},g("Reset the database to a clean slate. Make sure you have a backup!"),R({class:"button is-danger",onclick:()=>{a({title:"Reset confirmation?",message:"Are you sure you want to reset the database? This cannot be undone.",type:"yesno"}).then(e=>{e&&t.transaction.resetTansactions().then(e=>console.log(e))})}},"Reset")))));export{v as Settings};
